$Id: l2ckt-vpls-unit-test-plan.txt,v 1.1 2008/02/06 05:18:42 wlin Exp $

S3.02.P05.T02

Copyright (C) 2008, Juniper Networks, Inc.

NOTICE: This document contains the proprietary and confidential
information of Juniper Networks, Inc., and must not be
distributed outside of the company without the
permission of Juniper Engineering.

1.  INTRODUCTION

This document describes the unit test for LDP-VPLS and L2CKT NSR. The primary
goal is to test:
  - States are replicated correctly on the standby RE.

  - On backup RE switching over to the master RE, the PW connections for 
    LDP-VPLS and L2CKT on the standby RE stays up without flapping and there is 
    no label and subunit changes for the LDP-VPLS and L2CKT on the new master.

  - The support for LDP-VPLS and L2CKT NSR does not break the existing 
    functionalities, mainly the graceful-restart feature and also the NSR 
    support for BGP-VPLS and L2VPN. However the emphassis will be put on the 
    testing for the NSR features for LDP-VPLS and L2CKT.


Tracks:
  NPI Program: 326 JunOS Non-Stop Routing (NSR)
  RLI 2724 - NSR: L2 Circuit stateful replication
  RLI 5131 - NSR: LDP-VPLS stateful replication
  RLI 6442 - NSR: L2 Circuit prerelease testing
  RLI 3163 - NSR: LDP VPLS prerelease testing
  PR 103293 - Tracking PR for RLI 2724
  PR 103294 - Tracking PR for RLI 5131
  Functional spec:  sw-projects/os/nsr/l2ckt-vpls-funspec.txt
  Design spec:      sw-projects/os/nsr/l2ckt-vpls-design.txt


2.  SETUP

 
CE2--+----+                        +----+---CE1
     |    |	   +------+        |    |    
CE4--+    |        |      |        |    |
     | PE1+--------+  P   +--------+ PE2|
CD6--+    |        |      |        |    |
     |    |        +--+---+        |    |
CE8--+----+           | icehouse   +----+---CE5
    icehouse          |           heineken
                      |
		+-----+-----+
                |    PE3    | jupiler
	        |	    |
	        +-----+-----+
	        |     |     | 
	        |     |     | 
	       CE3   CE7   CE9


The basic setup is shown above. It involves:
   LDP-VPLS: PE1, PE2, PE3 and with CE1, CE2, CE3 on 3.3.3.0 subnet
   BGP-VPLS: PE1, PE2 and with CE4, CE5 on 4.4.4.0 subnet
   L2CKT:    PE1, PE3 and with CE6, CE7 on 2.2.2.0 subnet
   L2VPN:    PE1, PE3 and with CE8, CE8 on 10.10.10.0 subnet

The configurations are based on the configurations originally 
introduced by Nadeem with some modifications. They can be found at:
/b/wlin/config/vpls/nsr_unit_test directory:

heineken_l2ckt_l2vpn_vpls.config
icehouse_l2ckt_l2vpn_vpls.config
grolsch_l2ckt_l2vpn_vpls.config         
jupiler_l2ckt_l2vpn_vpls.config



3. FUNCTIONAL TEST CASES

In different test cases below, the following checks are performed 
whenever it is applicable.

  A. On both master and standby REs, check the PW connections, in-coming
     labels for BGP-VPLS, LDP-VPLS, L2VPN and L2Circuit respectively. 
     Check the dynamic interface and its associated sub-unit used by 
     both BPG-VPLS and LDP-VPLS. 

     The following commands are used:
     "show vpls/l2vpn/l2circuit connection extensive"

  B. On standby RE, check the VPLS IFL repository for the matching interface,
     subunit and label(LDP-VPLS), compared with the master RE. Also check the
     state for each IFL repository entry.

     Check the label repository for the in-coming label(LDP-VPLS/L2Circuit) 
     or the label base/range (BGP-VPLS/L2VPN). Check the state for each
     label repository entry.

     The following hidden commands are used:
     "show vpls replicaton dynamic-interface bgp/ldp"
     "show vpls replicaton label bgp/ldp"
     "show l2vpn replication label"
     "show l2circuit replication label"

  C. On master RE, ping from a local CE to its corresponding remote CE through 
     BGP-VPLS, LDP-VPLS, L2CKT and L2VPN connections respectively.

  D. On standby RE, check the expected routes are in their corresponding 
     route table.

     The following commands may be used:
     "show route table l2ciruict.0"
     "show route table instance-name.l2vpn.0"
     "show route table bgp.l2vpn.0"

It is assumed that the configuration on the standby RE is synced up with
the master RE after a synchronization delay that it may take. Most of
the tests are performed on the router grolsch which has NSR enabled.

3.1 Establishing new VPLS/L2CKT/L2VPN connections

  Goal: Does not break the existing VPLS/L2CKT/L2VPN functions on the master RE.
        States are replicated correctly on the standby RE.
  
  Test Steps:
        1. Load the routers with the basic configurations specified in 
	   section 2 with NSR enabled.

  Success Criteria:
        Master RE:
	   The PW connections for LDP-VPLS, BGP-VPLS, L2CKT, L2VPN connections 
	   are all in "UP" state.
	   Ping succeeds from the local CE to its correpodnng remote CE for
	   BGP-VPLS, LDP-VPLS, L2VPN and L2Circuit repectively.

        Standby RE:
	   Has all the expected VPLS IFL repository entries that has the 
	   matching subunit, in-label compared with the master RE and stay in 
	   'inUse' state.
	   Has all the expected Label repository entries with the same in-label
	   or label base/range when compared with the master and all the label
	   repository entries are in 'inUse' state.

           PW connections for LDP-VPLS, BGP-VPLS, L2CKT, L2VPN are all up.

	   In-labels, subunits for VPLS interfaces matches the ones shown in
	   the master RE in the output of the "show vpls|l2vpn|l2circuit 
	   connection" respectively.
  
   Result: Pass


3.2 Deactivating routing-instance for VPLS/L2VPN and l2circuit protocol

   Goal: Standby RE receives and processes the kernel message, LDP callback
         correctly.
   
   Test Steps:
        1. Deactivate the routing instance for LDP-VPLS and its associated 
	   local CE-facing interfaces.
        2. Do the same for BGP-VPLS.
        3. Do the same for L2VPN.
        3. Deactivate protocol l2circuit and local CE-facing interfaces 
	   that belongs to the L2CKT.

   Success Criteria: 
       Master RE:
           PW Connection goes away as each corresponding routing-instance or 
	   L2CKT protocol and its local CE facing interface is deactivated.
	   
       Standby RE:
	   Only deletes the corresponding VPLS or label repository entry for
	   the effected routing-instance/protocol/interfaces that was 
	   deactivated.

           Only the connections that was torn down on the master RE goes
	   down, while others with no configuration change should not be 
	   effected.

   Result: Pass

	 
3.3 Reactivating routing-instance for VPLS/L2VPN and l2circuit protocol

   Goal: Standby RE receives and processes the kernel message, LDP callback
         correctly and all the repository entry was indeed cleaned up properly
	 in test case 3.2.

   Test Steps:
       1. Activate the routing-instance for LDP-VPLS and its corresponding
          local CE-facing interface.
       2. Do the same for BGP-VPLS.
       4. Do the same for L2VPN.
       3. Reactivate protocol l2circuit and CE facing interface for the 
          l2circuti.

   Success Criteria:
       Same as the ones described in test case 3.1.

   Result: Pass


3.4 Deactivate/Reactivate local CE-facing interface.

 3.4.1 L2CKT

   3.4.1.1 Deactivate interface

    Goal: L2CKT gets callback from LDP and cleans up label repository.

    Test Steps:
        1. Deactivate local CE facing interface for L2CKT.

    Success Criteria:
        On standby RE, label repository for L2CKT is removed.
        'show l2circuit connection' displays a PW state as 'NP'.

    Result: Pass


   3.4.1.2 Reactivate interface

    Goal: L2CKT relearns in-label from LDP and triggers L2CKT to
          process in-label.
    
    Test Steps:
        1. activate local CE facing interface for L2CKT.

    Success Criteria:
        A corresponding label repository is added for L2CKT on the standby RE
        with a state 'inUse'.
    
        PW connection for L2CKT is up with the same in-lable as the shown
        on the master RE.  

        Ping succeeds again between CE6 to CE7 on master RE.

    Result: Pass

  3.4.2 L2VPN
  
   3.4.2.1 Deactivate interface

     Goal: Does not break existing L2VPN functionalities.
    
     Test Steps:
         1. deactivate local CE facing interface for L2VPN.

     Success Criteria:
         No change to the label repository for L2VPN.
	 L2VPN connection state changes to "LD".

    Result: Pass
	
   3.4.2.2 Reactivate interface

     Goal: Does not break existing L2VPN functionalities.
    
     Test Steps:
         1. activate local CE facing interface for L2VPN.

     Success Criteria:
         No change to the label repository for L2VPN on the standby RE.

	 L2VPN connection state changes back to "UP"
	 
	 Pings works again between CE8 and CE9 on the master RE.
 
    Result: Pass


  3.4.2 LDP-VPLS
 
    3.4.2.1 Deactivate interface
    
     Goal: With the current implementation, expect no change in the 
           repository on standby RE.
	
     Test Steps:
         1. deactivate local ce-facing interface.

     Success Criteria:
         No change for the corresponding VPLS IFL repository entry and
         the corresponding LDP label repository entry on standby RE.

         PW connection stays up, with zero number of "up" local interface.

         Ping does not go through between CE routers on master RE.

     Result: Pass
      

    3.4.2.2 Activate interface

     Goal: LDP-VPLS stays UP on standby RE with no change in 
           the repository on standby RE.
 
     Test Steps:
         1. activate local ce-facing interface.

      Success Criteria:
         No change for the corresponding VPLS IFL repository entry and
         the corresponding LDP label repository entry on standby RE.

         PW connection stays up, shows the up (local) interface.

         Ping succeeds once again between CE routers on master RE.

     Result: Pass


   3.4.3 BGP-VPLS

     3.4.2.1 Deactivate interface
    
      Goal: expect no change in the repository on standby RE.
	
      Test Steps:
           1. deactivate local ce-facing interface.

      Success Criteria:
          No change for the corresponding VPLS IFL repository entry and
          the corresponding LDP label repository entry on standby RE.

          PW connection changes to "LD", with zero number of up interface.

          Ping does not go through between CE routers on master RE.
      
      Result: Pass

     3.4.2.2 Activate interface
 
      Goal: BGP-VPLS goes up on standby RE again with no change in 
            the repository on standby RE.
 
      Test Steps:
         1. activate local ce-facing interface.

         Success Criteria:
             No change for the corresponding VPLS IFL repository entry and
             the corresponding LDP label repository entry on standby RE.

             PW connection stays up, shows the up (local) interface.

             Ping succeeds once again between CE routers on master RE.

      Result: Pass
    
    
3.5 Switching between VT and LSI interface for VPLS

 3.5.1 Changing from VT to LSI interface

  Goal: Testing the change of repositories on the standby RE and
        whether the correct actions will be taken.

  Test Steps:
      1. While the LDP-VPLS is running with VT interface, change the
         configuration on master RE by adding "protocol vpls no-tunnel-service"
	 to the routing instance configured for the LDP-VPLS.
      2. Do the same to BGP-VPLS.


  Success Criteria:
      Master RE: 
	 Dynamic LSI interface is created for LDP-VPLS and the PW connection
	 for LDP-VPLS is in UP state. Dynamic LSI interface is created for
	 for BGP-VPLS and PW connection for BGP-VPLS is in UP state.

	 Ping goes successfully among logical router CE1, CE2 and CE3.
	 for LDP-VPLS.

	 Ping goes successfully between logical routers CE4 and CE5 for
	 BGP-VPLS.

      Standby RE:
          VPLS IFL repository entries associated with VT IFL are deleted,
	  its associated subunit are freed.
	  New repository entries are added for LSI interface with the matching 
          unit, subunit, labels(LDP-VPLS) compared with the master RE and are 
	  in "InUse" state.

	  Previous label repository entry for BGP-VPLS and LDP-VPLS are 
	  deleted and new repository entries are added with the matching
	  label(LDP-VPLS) or label base/range(BGP-VPLS) and are in "InUse"
	  state.
	  
	  Label repository associated with L2VPN/L2Circuit are not affected.
	  So are the connections for L2VPN/L2Circuit.

	  The PW connections for BGP-VPLS and LDP-VPLS are 'UP'.

      Result: Pass


  3.5.2 Changing from LSI to VT interface

  Goal: Testing the change of repositories on the standby RE and
        whether the correct actions will be taken.

  Test Steps:
      1. Following test 3.5.1, by deleting "protocol vpls no-tunnel-service"
	 to the routing instance configured for the LDP-VPLS on the master RE.
      2. Do the same to BGP-VPLS.

  Success Criteria:
      Master RE: 
	 PW connections for LDP-VPLS and BGP-VPLS are deleted and replaced 
	 with the dynamic VT interface. The PW connections for both LDP-VPLS
	 and BGP-VPLS are in UP state again.
	 
	 L2CKT and L2VPN connections are not affected as verified through
	 "show l2vpn/l2circuit connection extensive".

	 Ping goes successfully among logical router CE1, CE2 and CE3.
	 for LDP-VPLS.

	 Ping goes successfully between logcal routers CE4 and CE5 for
	 BGP-VPLS.

      Standby RE:
          VPLS IFL repository entries associated with LSI IFL are deleted and
	  its associated subunit are freed.
	  New repository entries are added for VT interface with the matching 
          unit, subunit, labels(LDP-VPLS) and are in "InUse" state.

	  Previous label repository entry for BGP-VPLS and LDP-VPLS are 
	  deleted and new repository entries are added with the matching
	  label(LDP-VPLS) or label base/Range(BGP-VPLS) and are in "InUse" 
	  state.

	  Label repository associated with L2VPN/L2Circuit are not affected.
	  So are the connections for L2VPN/L2Circuit.

	  The PW connections for BGP-VPLS and LDP-VPLS are 'UP'.

      Result: Pass


3.6 Specified the VT interface

  Goal: With the potentail change of VT interface, testing whether
        the repositories on the standby RE will be updated correctly
	and whether the correct actions will be taken.

  Test Steps:
      1. Follwoing the test 3.5.2, both the BGP-VPLS and LDP-VPLS are using the
         VT interfaces. Update the master RE configuration with "
	 set routing-instance red/black protocol vpls tunnel-service device ..."
	 and "commit".	 
      2. When the master and standby RE are again stablized, revert the 
         previous configuration: "delete outing-interface red/black protocol 
	 vpls tunnel-service device ..." and "commit". Success Criteria remains
	 the same.

  Success Criteria:
      Master RE:
         With the setup I have, the PW connections for both BGP-VPLS and
	 LDP-VPLS bounced. Previously created dynamic interfaces are replaced 
         with the VT interface with a new subunit. PW connections are 
	 back to UP eventually.

	 "show interface terse | match vpls" only displays the vpls interface 
	 that are in use. 
	 
	 Ping goes successfully among logical router CE1, CE2 and CE3.
	 for LDP-VPLS.

	 Ping goes successfully between logical routers CE4 and CE5 for
	 BGP-VPLS.
	   
      Standby RE:
          VPLS IFL repository entries associated with the previous VT IFL 
	  are deleted,  its associated subunit are freed. New repository 
	  entries are added with the matching unit, subunit, labels(LDP-VPLS) 
	  that are currently used by the master RE and IFL reposiotry entries 
	  are "InUse" state.

	  Previous label repository entry for BGP-VPLS and LDP-VPLS are deleted
	  and new repository entries are added with the matching label(LDP-VPLS)
	  or label base/range(BGP-VPLS) and are in "InUse" state
	  
	  Label repository associated with L2VPN/L2Circuit are not affected.
	  So are the connections for L2VPN/L2Circuit.

	  The PW connections for BGP-VPLS and LDP-VPLS are 'UP'.

	  "show interface terse | match vpls" only displays the vpls interface 
	  that are in use

          L2CKT and L2VPN connections are not affected as verified through
	  "show l2vpn/l2circuit connection extensive".

      Result: Pass


3.7 Power down the tunnel PIC card for VT interface

  Goal: Testing standby RE processing interface change message and whether the 
        repositories on the standby RE will be updated correctly and the 
	correct	actions be taken.

  Test Steps:
      1. Following the test 3.5.3, while both the BGP-VPLS and LDP-VPLS are 
         using the VT interface, offline the PIC/FPC where the VT interface 
	 resides by updating the master RE configuration with "
	 "request chassis pic pic-slot 1 fpc-slot 0 offline"	 
      2. When the master and standby RE are stablized, revert the previous 
         configuration: "request chassis pic pic-slot 1 fpc-slot 0 online". 

  Success Criteria:
      Master RE:
         The PW connections for both BGP-VPLS and LDP-VPLS goes down and stays 
	 at "NP" state. 

	 When the PIC goes online, PW connections for BGP-VPLS, LDP-VPLS 
	 goes UP again. 
	 
	 Ping goes successfully among logical router CE1, CE2 and CE3.
	 for LDP-VPLS.

	 Ping goes successfully between logical routers CE4 and CE5 for
	 BGP-VPLS.
	   
      Standby RE:
         While the PIC goes offline, VPLS IFL repository entries associated 
	 with the VT interface are deleted, their associated subunit freed. 
	 Label repository entries for BGP-VPLS and LDP-VPLS are also deleted.

	 The PW connections for BGP-VPLS and LDP-VPLS are in "NP" state.

	 When the PIC goes online again, matching VPLS IFL repository entry
	 label entry are created.

	 The PW connections for BGP-VPLS, LDP-VPLS goes back to "UP" state.

         L2CKT and L2VPN connections are not affected as verified through
	 "show l2vpn/l2circuit connection extensive".
	  
      Result: Pass


3.8 Deleting neighbor

 3.8.1 LDP-VPLS

  3.8.1.1 Delete LDP-VPLS neighbor

    Goal: L2CKT gets callback from LDP and cleans up label repository.

    Test Steps:
        1. On master RE, "delete routing-instance red neighbor 80.80.80.1"
	   and "commit"

    Success Criteria:
        On Master RE:
	   PW connection to LDP-VPLS neighbor 80.80.80.1 goes away.

        On Standby RE:
	   LDP Label repository for neighbor 80.80.80.1 getting deleted.
	   VPLS IFL repository for neighbor 80.80.80.1 also getting deleted and
	   its subunit freed.
	   PW connection to LDP-VPLS neighbor 80.80.80.1 goes away.

     Result: Pass

   3.8.1.2 Adding back LDP-VPLS neighbor

    Goal: L2CKT gets callback from LDP and adds a label repository.

    Test Steps:
        1. On master RE, add the LDP-VPLS neighbor back to the configuration.

    Success Criteria:
        On Master RE:
	   PW connection to LDP-VPLS neighbor 80.80.80.1 comes back up.
	   
	   Ping succeed the local CE2 and CE1.

        On Standby RE:
	   Matching LDP label repository entry for the LDP-VPLS neighbor 
	   "80.80.80.1" is created and it is in "InUse" state.
	   
	   Matching VPLS IFL repository entry for the LDP-VPLS neighbor
	   "80.80.80.1" is created and it is in "InUse" state.

	   PW connection to LDP-VPLS neighbor 80.80.80.1 comes up.

    Result: Pass


 3.8.2 BGP-VPLS

  3.8.2.1 Delete and add BGP-VPLS site-id.
     
  The success criteria is similar as those described in 3.8.1.1.

  Result: Pass
     

3.9 Clear LDP session
  3.9.1 Clear LDP session on grolsch
    blocked by an existing issue on master RE which may have nothing to do
    with the NSR changes, need further investigation.
    (master RE stays in NP state for LDP-VPLS)

  3.9.2 Clear LDP session on heineken
    blocked by an existing issue on master RE which may have nothing to do
    with the NSR changes, need further investigation.
    (master RE stays in NP state for LDP-VPLS)

4.0 Clear BGP neighbor
  4.1 Clear BGP neighbor on grolsch
    Goal: Testing existing functionality for BGP-VPLS NSR.
    
    Test Steps:
       1. Issue "clear bgp neighbor" on grolsch.

    Success Criteria:
       PW connections on standby RE is not affected.

     Test Result: Pass.

  4.2 Clear BGP neighbor on the remote PE (heineken)
    Goal: Existing functionality for BGP-VPLS NSR still works.
    
    Test Steps:
       1. Issue "clear bgp neighbor" on heineken.
      
    Success Criteria:
       On Standby RE:
          PW connection for BGP-VPLS goes down and its corresponding VPLS IFL 
	  repository entry and label repository entry are deleted.

	  New VPLS IFL repository entry and label repository entry are added
	  later and PW connection come UP again with matching field compared 
	  with the master RE.

      Test Result: Pass

4.1 NSR switch-over
   
  Goal:  In a steady state, when the RE switch-over occurs, verify the LDP-VPLS,
         BGP-VPLS, L2CKT and L2VPN on the standby RE takes over seamlessly.
	 There is no break down of the PW connections and each PW keeps the same
	 dynamic interface and subunit (for VPLS) and the same in-label.
	 
	 Verify new master RE cleans up the VPLS IFL repository (VPLS) and label
	 repository after the switch-over.

   Success Criteria:
          
	The following applies to test cases 4.1.1 and 4.1.2.
  
        On new master: 
	  No flap on the PW state for each connections.  
	  PW state for each corresponding connection remains 'UP' before and 
	  after the switch-over.

	  In each corresponding routing table, check the expected routes are 
	  still there and also checking the ages of theses routes. Make sure
	  no routes are getting deleted because of the switch-over.

	  All the repository entries are getting deleted after the switch-over.

	  "show interface terse | match vt (or lsi)" does not have any
	   unexpected interfaces.

	  No traffic loss during switch-over 


  4.1.1 With VT interface for VPLS

    Goal: see section 4.1

    Test Steps:
     1. When the standby RE are in sync with master RE (PW state, repository, 
        etc.). Starting "ping rapid count 100000..." across the CEs for
	LDP-VPLS, BGP-VPLS, L2CKT and L2VPN.

     2. Issue a "request chassis route-engine master switch" and "commit"

     3. When the new backup synced up with the new master, repeat the test 
        step 1 and 2 a couple of times.

     Success Criteria: see section 4.1.

     Result: Pass


  4.1.2 With LSI interface for VPLS
    Goal: see section 4.1

    Test Steps:
     1. When the standby RE are in sync with master RE (PW state, repository, 
        etc.) Starting "ping rapid count 100000..." across the CEs for
	LDP-VPLS, BGP-VPLS, L2CKT and L2VPN.

     2. Issue a "request chassis route-engine master switch" and "commit"

     3. When the new backup synced up with the new master, repeat the test 
        step 1 and 2 a couple of times.

     Success Criteria: see section 4.1.

     Result: Pass
    

4.2 Restart-routing

 4.2.1 On master RE

   Goal: Standby RE syncs with master RE and re-establishes PW connection when
         after master RE finishes restart.

   Test Steps:
         1. In a steady state, issue a "restart routing" on the master RE.
 
   Success Criteria:
       On Master RE:
         The PW connections go away and re-establish and stay in "UP" state
	 after the restart for each connections.

	 Ping succeeds among local CE to its corresponding remote CE for 
	 each corresponding connections.

       On Standby RE:
         The PW connections go away and VPLS IFL repository/label repository
	 are deleted.
       
         After master RE restarts, new VPLS IFL repository entries and label
	 repository entries are added with matching fields and stays in InUse
	 state. The PW connections for BGP-VPLS, LDP-VPLS, L2VPN and L2Circuit
	 go "Up".
          
   Result:
          


 4.2.2 On standby RE
  
   Goal: Standby RE syncs up with master RE and re-establishes PW connections.

   Test Steps:
       1. In a steady state, issue "restart routing" on the standby RE.

   Success Criteria:
       This should not affect master RE. The standby RE should re-establish 
       PW connections for BGP-VPLS, LDP-VPLS, L2VPN, L2Circuit after the 
       restart and has matching interface, subuit, label or label range/offset.
    
       Each VPLS IFL repository entry and label repository entry should be 
       deleted and re-added with matching fields and stays in 'InUse' state.

   Result: Pass
   

4.4 Reboot RE
  While both REs are in a steadby state
  4.4.1 Reboot master RE
    Test Steps: 
        1. Issue an "request system reboot" on the master RE.

    Success Criteria:
       Standby RE takes over as the master.

       After the reboot, the previous RE becomes the standby RE. It should
       sync up with the master RE and has expected IFL repository entries 
       and label repository entries with all in 'InUse' state. Its PW
       connections for BGP-VPLS, LDP-VPLS, L2VPN, L2Circuit are in UP states.
        
    Result: Pass

  4.4.2 Reboot standby RE
    Test Steps: 
        1. Issue an "request system reboot" on the standby RE.

    Success Criteria:
        Master RE should not be affected.
        Standby RE comes up sync with the master RE and PW connections are UP
	for BGP-VPLS, LDP-VPLS, L2VPN and L2CKT and have matching state.
	
	VPLS IFL repository entries and label repository entries are created 
	with expected fields and are all in "InUse" state.

    Result: Pass


4.5 Mesh-group ID
  Goal: Even though there is separate RLI to qualify this feature, we
        still need to test it out, at least there should be no unexpected
	surprise. 


4.6  BOUNDARY TEST CASES

There is no guarantee that the data plane still forwarding traffic across
BGP-VPLS, LDP-VPLS, L2VPN and L2Circuit connection in the boundary test 
cases. As a matter of fact, we may experience some traffic loss during these
test cases. The goal is to make sure that control plane works as expected
and system can recover thereafter and there is no unexpected behaviors such 
as core dump.

4.6.1 Trigger another RE switch-over immediately after the pevrious one
      and do it a couple of times.

4.6.2 Restart routing on the primary RE back to back.

4.6.3 Restart routing on the backup RE back to back.

4.6.4 Restart routing on the primray RE right after configuration change.

4.6.5 Restart routing on the backup RE in the middle or right after the 
      configuration change from the master RE.


5.  GRES TEST CASES

{If RLI has GRES (support) Yes, please add GRES testing. If not, mention
that, please dont leave this empty. THIS IS MANDATORY}

6. TX TEST CASES

{If RLI lists TX as a supported platform, please add TX testing. If not mention
that and also add test cases to ensure that the feature is disabled
on TX and doesn't cause other problems,
please dont leave this empty. THIS IS MANDATORY }

7.  REGRESSION TEST CASES

Systester is helping running some of the regression tests to check the 
existig functionalities still work for LDP-VPLS/L2CKT with the private
build image.

Test for graceful restart

8.  INTEROP TEST CASES

None.

9.  MIGRATION & COMPATIBILITY TEST CASES

None.

10.  TEST COVERAGE REMAINING

Test there is no unexpected surprise for the mesh-group, even though
there is a separate RLI to qualify the NSR support for the mesh-group
later.

More boundary cases.

More regression test on the existing functionalities.

11.  DEFECTS REMAINING


