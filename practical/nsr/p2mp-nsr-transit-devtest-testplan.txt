Author: Arun Gandhi
Reviewed by: Markus Jork, Harish Sitaram

Topology:
=========
           +-----------------------------+
   shiner  |                             |arrow           utica
  (ingress)|		tivoli           |(DUT)          (egress) 
  	   R0 ----------- R1 ----------- R2 ----------- R3
                               	         |              |
                                	 |              |
                                	 +------R4------+
                                      	      weber

  R0, R1, R4, R5: M10i
  R2: DUT (M320)


Testcases:
==========

1.  Configure P2MP with & without Non-Stop Routing (NSR).

2.  Send data traffic on the P2MP LSP.

3.  Scaling tests:

    a.  1 P2MP LSP with 100 sub-LSPs and all have the same next-hop (one next-hop)
        on the DUT.

    b.	1 P2MP LSP with 40 sub-LSPs and each has a different (unique) next-hop on 
        the DUT.

       	Configuration:
       	--------------
   	* 20 VLANs configured between R2-R3
 	* 20 VLANs configured between R2-R4
  	* 1 P2MP LSP with 40 sub-LSPs
  	* 20 sub-LSPs follow R0-R1-R2-R3 and the other 20 sub-LSPs follow the path
	  R0-R1-R2-R4 each on a different VLAN
  	* Each sub-LSP has a unique OIF (IFL), which means 40 next-hops on the DUT
  	* Non-Stop Routing (NSR) is configured on the DUT

    c.	20 P2MP LSPs with 20 sub-LSPs per P2MP LSP and over-lapping OIFs.

       	Configuration:
       	--------------
  	* 20 VLANs configured between R2-R3,
  	* 20 VLANs configured between R2-R4,
  	* 20 P2MP LSPs with 20 sub-LSPs (total 400) in each with overlapping OIFs 
          (next-hops),
  	* 200 sub-LSPs follow R0-R1-R2-R3 and the other 200 sub-LSPs follow path
          R0-R1-R2-R4-R3,
  	* Non-Stop Routing (NSR) is configured on the DUT
 
    d.	Cross-over case: The sub-LSPs of a same P2MP cross each other at the DUT.
        1 P2MP LSP with 40 sub-LSPs; 20 sub-LSPs follow the path R0-R1-R2-R3 &  
        the other 20 sub-LSPs follow the path R0-R2-R4-R3. Each sub-LSP has a
        unique OIF (next-hop) on the DUT.

    e.	Merge case: The sub-LSPs of a same P2MP cross each other and re-merge at 
        the egress node (DUT in this case). 1 P2MP LSP with 40 sub-LSPs; 20 sub-
	LSPs follow the path R0-R1-R2-R3 & the other 20 sub-LSPs follow the path   
        R0-R2-R4-R3. All 40 sub-LSPs re-merge at R3 (DUT).                      

    f.	Repeat tests (b) & (c) and gracefully switchover RE mastership on node R4
        which is also a penultimate hop for a subset of sub-LSPs of a P2MP LSP.

    g.	Repeat tests (b) & (c) and gracefully switchover RE mastership on node R3 
        which is an egress node (LER) for the P2MP LSP(s).

4.  Configure bandwidth on P2MP sub-LSPs; Observe bandwidth reservations on transit
    hops after RE mastership switchover with NSR.

5.  Negative Tests:

	a.  Deactivate/reactivate an interface.
	b.  Delete/add an interface.
        c.  Deactivate/reactivate 10 sub-LSPs of a P2MP LSP.
        d.  Delete/add 10 sub-LSPs of a P2MP LSP.
	e.  Kill routing process via SIGKILL.
	f.  Restart chassis-control.

6.  Graceful Restart (GR)

7.  Graceful RE switchover (GRES) with and without NSR via
	a.  CLI
	b.  Kernel crash
  	c.  Rebooting the master RE

8.  Other feature tests:

	a.  Refresh reduction

	b.  Egress tunnel-services 

	c.  Egress explicit-null

	d.  Make-Before-Break 

	    i. Transit router switch-over after new MBB instance is up and old 
               instance needs to be deleted (Waiting on optimize-hold-dead-delay)

	e.  Configure P2MP with & without link protection and NSR
